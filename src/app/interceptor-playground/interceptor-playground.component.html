<md-sidenav-container>
  <md-sidenav mode="side" align="start" opened="true">
    <md-button-toggle-group name="features" vertical="true">
      <md-button-toggle (click)="load()" value="load">Load all Kubric's movies</md-button-toggle>
      <md-button-toggle (click)="retryAndFail()" value="retryAndFail">Retry (actual http) request & fail</md-button-toggle>
      <md-button-toggle (click)="shortCircuitWithNoResponse()" value="shortCircuitWithNoResponse">Short circuit</md-button-toggle>
      <md-button-toggle (click)="shortCircuitAndGetMockResponse()" value="shortCircuitAndGetMockResponse1">Short circuit & Get mock response</md-button-toggle>
      <md-button-toggle (click)="simulateError()" value="simulateError">Simulate error</md-button-toggle>
      <md-button-toggle (click)="simulateErrorAndGetMockResponse()" value="simulateErrorAndGetMockResponse">Simulate error & Get mock response</md-button-toggle>
      <md-button-toggle (click)="switchToUnsubscribe()" value="unsubscribe">Test unsubscription</md-button-toggle>
    </md-button-toggle-group>
  </md-sidenav>
  <div style="min-height: 600px; margin: 20px;">
    <section *ngIf="!showAllMovies && !retryFailure && !shortCircuitedNoResponse && !shortCircuitedWithMockResponse && !errorUnhandled && !errorHandledWithMockResponse && !unsubscribeFlow">
      <h1>&lt;-- Click on one of the options from the left navigation</h1>
    </section>
    <div *ngIf="showAllMovies">
      <h1>All kubrics movies</h1>
      <section>
        <md-card *ngFor="let movie of movies">
          <md-card-title>{{movie.name}}</md-card-title>
          <md-card-subtitle>{{movie.year}} {{movie.documentary ? 'documentary' : 'movie'}}</md-card-subtitle>
        </md-card>
      </section>
    </div>
    <div *ngIf="retryFailure">
      <h2>Retried final step of interceptor chain (actual http request); but failed</h2>
      <h3>Verify the console for message</h3>
    </div>
    <div *ngIf="shortCircuitedNoResponse">
      <h2>Request is short circuited (skipped)</h2>
      <h3>By intermediate interceptor, no interceptor generated response</h3>
    </div>
    <div *ngIf="shortCircuitedWithMockResponse">
      <h2>Request is short circuited (skipped)</h2>
      <h3>Response generated by intermediate interceptor</h3>
      <md-card *ngFor="let movie of movies">
        <md-card-title>{{movie.name}}</md-card-title>
        <md-card-subtitle>{{movie.year}} {{movie.documentary ? 'documentary' : 'movie'}}</md-card-subtitle>
      </md-card>
    </div>
    <div *ngIf="errorUnhandled">
      <h2>Received error</h2>
      <h3>Details: {{error.message}}</h3>
    </div>
    <div *ngIf="errorHandledWithMockResponse">
      <h2>Received error</h2>
      <h3>Response generated by intermediate interceptor</h3>
      <md-card *ngFor="let movie of movies">
        <md-card-title>{{movie.name}}</md-card-title>
        <md-card-subtitle>{{movie.year}} {{movie.documentary ? 'documentary' : 'movie'}}</md-card-subtitle>
      </md-card>
    </div>
    <div *ngIf="unsubscribeFlow">
      <button md-raised-button *ngIf="!unsubscribeSimulationInprogress" (click)="onSimulateLongRequest()">Simulate long request (~5 mins)</button>
      <button md-raised-button *ngIf="unsubscribeSimulationInprogress" (click)="onCancelRequest()">Cancel request</button>
    </div>
  </div>
</md-sidenav-container>
